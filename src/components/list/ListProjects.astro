---
import { getProjectsGithub } from "@/functions/projets";

import type { IProject } from "@/shared/models/project.interface";
import Project from "../Project.astro";

const { limit } = Astro.props;
const projects: IProject[] = await getProjectsGithub();
console.log(projects);
const filterProjects = typeof projects === "object" ? [] : (projects as IProject[]);
filterProjects.sort(
  (a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime()
);

console.log(filterProjects);

if (Number(limit) > 0) {
  filterProjects.splice(0, limit);
}
---

<div class="flex flex-col">
  <h2 class="text-3xl font-bold text-center mb-4 mt-8 text-[#7AEC51]">Proyectos</h2>
  <div class="flex flex-wrap justify-evenly gap-6 container mx-auto my-auto">
    {
      filterProjects.map((project: IProject) => (
        <Project
          key={project.id}
          name={project.name}
          created_at={project.created_at}
          description={project.description}
          html_url={project.html_url}
          homepage={project.homepage}
        />
      ))
    }
  </div>
</div>
